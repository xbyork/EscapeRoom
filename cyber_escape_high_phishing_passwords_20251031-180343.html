```html
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CyberEscape: Phishing Defense</title>
<style>
body {font-family: 'Segoe UI', Tahoma, sans-serif; background:#0a0a0f; color:#e0e0e0; margin:0; padding:0;}
header {background:#1c1c2b; padding:20px; text-align:center;}
h1 {color:#57f287;}
.container {max-width: 800px; margin:30px auto; background:#161624; padding:20px; border-radius:10px;}
button {background:#57f287; border:none; padding:10px 20px; border-radius:5px; cursor:pointer; margin:5px;}
button:hover {background:#45c273;}
#scoreboard {text-align:right; font-weight:bold;}
.locked {color:#ff4c4c;}
.unlocked {color:#57f287;}
.hint {display:none; background:#23233b; padding:10px; border-radius:5px; margin-top:10px;}
#downloadBtn {position:fixed; bottom:10px; right:10px; background:#24243b;}
.choice {display:block; margin:5px 0;}
.feedback {margin-top:10px; font-weight:bold;}
</style>
</head>
<body>
<header>
<h1>CyberEscape: Phishing Defense</h1>
<p>You are the cybersecurity officer of your school network. A hacker has locked your system using hidden password locks in fake emails. You must outsmart the phishing traps to recover access!</p>
</header>

<div class="container">
<div id="scoreboard">Score: <span id="score">0</span>/5</div>
<div id="game"></div>
</div>

<button id="downloadBtn">Download This Game (.html)</button>

<script>
window.__gameGrade = "high";
window.__gameTopics = "phishing,passwords";

const puzzles = [
{
 id:1,
 type:"MCQ",
 question:"A suspicious email claims youâ€™ve won a scholarship but asks you to click a link and log in with your credentials. What should you do first?",
 choices:[
  "Click the link immediately to claim it",
  "Check the senderâ€™s email domain and verify the scholarship through official channels",
  "Forward it to friends to see if they also got it",
  "Reply asking for more details"
 ],
 answer:"Check the senderâ€™s email domain and verify the scholarship through official channels",
 explanation:"Phishing emails often use fake awards or scholarships to steal credentials. Verifying legitimacy through official sources prevents credential theft.",
 hints:[
  "Think before you click any link.",
  "Real scholarships rarely ask you to log in through email links.",
  "Look closely at the senderâ€™s address and organization."
 ]
},
{
 id:2,
 type:"MCQ",
 question:"A phishing email often uses which psychological tactic?",
 choices:[
  "Team motivation",
  "Urgency or fear",
  "Detailed technical language only experts understand",
  "Slow response encouragement"
 ],
 answer:"Urgency or fear",
 explanation:"Attackers use urgency (â€œYour account will close!â€) so victims act without thinking. Recognizing emotional manipulation is key to staying safe.",
 hints:[
  "What emotion are phishers trying to trigger?",
  "They want you to panic or rush.",
  "Slow down, verify before responding."
 ]
},
{
 id:3,
 type:"SHORT",
 question:"A link in an email reads 'https://university-login.co'. Your real school domain is 'university.edu'. What red flag do you see?",
 answer:"Fake domain",
 explanation:"Phishing links often disguise themselves with look-alike domains (like .co vs .edu). Always inspect domains carefully before logging in.",
 hints:[
  "Look at the top-level domain (.co vs .edu).",
  "The attacker changed one part to trick you.",
  "Compare the domain ending to the legitimate organization."
 ]
},
{
 id:4,
 type:"MATCH",
 question:"Match the phishing clue to its danger sign.",
 pairs:{
   "Misspelled company names":"Fake sender identity",
   "Generic greetings like 'User'":"Mass phishing attempt",
   "Unexpected attachments":"Malware or keylogger risk"
 },
 explanation:"Recognizing these red flags supports safer email behavior, stopping data breaches before they start.",
 hints:[
  "Each clue relates to how attackers hide intent.",
  "Generic language = not personal.",
  "Attachments often hide harmful code."
 ]
},
{
 id:5,
 type:"MCQ",
 question:"If you accidentally clicked a phishing link and entered credentials, whatâ€™s the best next action?",
 choices:[
  "Ignore it and hope nothing happens",
  "Immediately change passwords and report to IT/security",
  "Delete browser history only",
  "Wait for the attacker to contact you"
 ],
 answer:"Immediately change passwords and report to IT/security",
 explanation:"Quickly changing passwords and alerting IT can stop further damage. Timely reporting helps protect others on the network too.",
 hints:[
  "Act fast to minimize impact.",
  "IT can help reset credentials safely.",
  "Don't hide the mistakeâ€”inform the right people."
 ]
}
];

let current = 0, score = 0;

function renderPuzzle(){
  const g = document.getElementById("game");
  if(current >= puzzles.length){
    g.innerHTML = `<h2 class='unlocked'>System Unlocked! ðŸŽ‰</h2><p>You escaped the phishing labyrinth with <strong>${score}/${puzzles.length}</strong> correct answers!</p>`;
    return;
  }
  const p = puzzles[current];
  let html = `<h2>Lock ${p.id} ðŸ”’</h2><p>${p.question}</p>`;
  if(p.type==="MCQ"){
    p.choices.forEach(c=>{
      html += `<label class='choice'><input type='radio' name='q${p.id}' value='${c}'> ${c}</label>`;
    });
  }
  else if(p.type==="SHORT"){
    html += `<input id='short${p.id}' type='text' style='width:100%;padding:8px;'>`;
  }
  else if(p.type==="MATCH"){
    html += `<table style='width:100%;'><tr><th>Clue</th><th>Danger Sign</th></tr>`;
    let keys = Object.keys(p.pairs);
    let vals = Object.values(p.pairs).sort(()=>Math.random()-0.5);
    keys.forEach((k,i)=>{
      html += `<tr><td>${k}</td><td>
        <select id='match_${p.id}_${i}'><option value=''>--Select--</option>
        ${vals.map(v=>`<option value='${v}'>${v}</option>`).join('')}
        </select></td></tr>`;
    });
    html += `</table>`;
  }
  html += `<div class='feedback' id='feedback${p.id}'></div>
  <button onclick='checkAnswer(${p.id})'>Submit</button>
  <button onclick='showHint(${p.id})'>Hint</button>
  <button onclick='skipPuzzle()'>Skip</button>
  <div id='hint${p.id}' class='hint'></div>`;
  g.innerHTML = html;
}

function showHint(id){
  const p = puzzles.find(x=>x.id===id);
  const h = document.getElementById('hint'+id);
  const hintText = p.hints[Math.floor(Math.random()*p.hints.length)];
  h.style.display='block';
  h.innerText = "Hint: " + hintText;
}

function skipPuzzle(){
  current++;
  renderPuzzle();
}

function checkAnswer(id){
  const p = puzzles.find(x=>x.id===id);
  let correct=false;
  if(p.type==="MCQ"){
    const sel = document.querySelector(`input[name='q${id}']:checked`);
    if(!sel){alert("Select an answer!");return;}
    correct = sel.value===p.answer;
  } else if(p.type==="SHORT"){
    const val = document.getElementById(`short${id}`).value.trim().toLowerCase();
    correct = val.includes(p.answer.toLowerCase());
  } else if(p.type==="MATCH"){
    correct = true;
    Object.keys(p.pairs).forEach((k,i)=>{
      const val = document.getElementById(`match_${id}_${i}`).value;
      if(val!==p.pairs[k]) correct=false;
    });
  }
  const feedback = document.getElementById('feedback'+id);
  if(correct){
    score++;
    document.getElementById('score').textContent=score;
    feedback.innerHTML=`<span class='unlocked'>Correct!</span> ${p.explanation}`;
    setTimeout(()=>{current++; renderPuzzle();},1500);
  } else {
    feedback.innerHTML=`<span class='locked'>Incorrect!</span> Try again or use a hint.`;
  }
}

document.getElementById("downloadBtn").onclick=function(){
  const filename = `CyberEscape_${window.__gameGrade}_${window.__gameTopics}.html`;
  const blob = new Blob([document.documentElement.outerHTML], {type:'text/html'});
  const a = document.createElement('a');
  a.href=URL.createObjectURL(blob);
  a.download=filename;
  a.click();
  URL.revokeObjectURL(a.href);
};

renderPuzzle();
</script>
</body>
</html>
```