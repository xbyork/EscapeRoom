```html
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>High School Cybersecurity Escape Room - Phishing & Passwords</title>
<style>
body { font-family: Arial, sans-serif; background-color: #0b1a2e; color: #f0f4ff; margin: 0; padding: 0; }
h1, h2, h3 { text-align: center; }
.container { max-width: 700px; margin: auto; padding: 20px; }
button { background-color: #1e90ff; color: white; border: none; padding: 10px 20px; margin: 5px; cursor: pointer; border-radius: 5px; }
button:hover { background-color: #63b3ed; }
.lock { border: 2px solid #63b3ed; border-radius: 8px; padding: 15px; margin: 15px 0; }
.hidden { display: none; }
.feedback { font-weight: bold; margin-top: 10px; }
#scoreDisplay { text-align: center; font-size: 1.2em; margin-top: 10px; }
.hint { font-style: italic; }
.download-btn { display: block; text-align: center; margin-top: 20px; }
code { background:#111; color:#0f0; padding:2px 5px; border-radius:4px; }
</style>
</head>
<body>
<div class="container">
<h1>Cyber Escape: The Phishing Files</h1>
<p><strong>Standard:</strong> NICE-K12-PHISH-3 — Analyze real-world phishing examples and explain strategies to avoid them.</p>
<h2>Mission Brief</h2>
<p>You are a cybersecurity investigator trapped in the <em>Digital Defense Lab</em> after hackers locked down the main system. 
To escape, you must analyze phishing threats and protect password access to open each encrypted door. Five digital locks stand between you and freedom.</p>

<div id="gameArea"></div>
<div id="scoreDisplay">Score: <span id="score">0</span>/5</div>
<div class="download-btn">
  <button id="downloadBtn">Download This Game (.html)</button>
</div>
</div>

<script>
window.__gameGrade = "high";
window.__gameTopics = "phishing_passwords";

const puzzles = [
{
 type: "MCQ",
 question: "Lock 1: You receive an urgent email from your 'bank' asking you to verify your password through a link. Which sign best confirms it’s a phishing attempt?",
 choices: ["The email includes your full name","The link domain doesn’t match the real bank","It uses https://","It comes from a corporate-sounding address"],
 answer: 1,
 explanation: "Different or misspelled domains are a primary indicator of phishing. Always verify the real website before clicking.",
 hints: ["Check the sender’s address carefully.","Domains can have subtle typos.","Real banks rarely ask for credentials via email."]
},
{
 type: "SHORT",
 question: "Lock 2: Complete the blank — The best way to avoid phishing is to __________ before clicking links or entering login info.",
 answer: "verify the source",
 explanation: "Verifying the source ensures communication authenticity before sharing credentials.",
 hints: ["Think about authenticity.","What should you always confirm?","Begins with the letter 'v'."]
},
{
 type: "MCQ",
 question: "Lock 3: A password reused across multiple sites was stolen in one data breach. What major risk arises?",
 choices: ["Password strength improves","Attackers can access other accounts","It disables phishing","It causes password fatigue only"],
 answer: 1,
 explanation: "Reused passwords give attackers free access across platforms when one data breach occurs.",
 hints: ["It’s about chain reactions.","Bad reuse leads to ... what on other sites?","Reuse expands vulnerability."]
},
{
 type: "MATCH",
 question: "Lock 4: Match the phishing cue with the correct risk type.",
 pairs: { 
  "Emotional urgency" : "Tricks user into hasty action",
  "Generic greeting" : "Not specific, mass-mailed",
  "Attachments from unknown sender" : "Malware infection risk"
 },
 explanation: "Phishing relies on human psychology and social engineering — urgency and trust exploitation.",
 hints: ["Urgency = hurry psychology.","Generic = impersonal.","Attachments = malware risk."]
},
{
 type: "MCQ",
 question: "Lock 5: Which strategy BEST strengthens defenses against phishing overall?",
 choices: [
   "Install more decorative fonts",
   "Use two-factor authentication and educate users",
   "Rely solely on antivirus software",
   "Open attachments to confirm sender content"
 ],
 answer: 1,
 explanation: "Two-factor authentication and user awareness greatly reduce credential theft success.",
 hints: ["It involves both tech and people.","Two-step verification helps.","Training is critical."]
}
];

let current = 0;
let score = 0;

function renderPuzzle() {
  if(current >= puzzles.length) {
    document.getElementById('gameArea').innerHTML = "<h3>All locks open!</h3><p>You’ve escaped the Digital Defense Lab with top cybersecurity awareness. Excellent work!</p>";
    return;
  }
  const p = puzzles[current];
  let html = `<div class="lock"><h3>${p.question}</h3>`;
  if(p.type === "MCQ") {
    html += p.choices.map((c,i)=>`<button onclick="checkMCQ(${i})">${c}</button>`).join("<br>");
  } else if(p.type === "SHORT") {
    html += `<input id="shortAns" placeholder="Type your answer"><br><button onclick="checkSHORT()">Submit</button>`;
  } else if(p.type === "MATCH") {
    html += "<ul>";
    for (let [k,v] of Object.entries(p.pairs)) {
      html += `<li><b>${k}</b> → <input class='matchAns' data-key='${k}' placeholder='Type the correct risk description'></li>`;
    }
    html += "</ul><button onclick='checkMATCH()'>Submit</button>";
  }
  html += `<div class='feedback' id='feedback'></div>`
  html += `<button onclick='showHint()'>Hint</button><button onclick='skipPuzzle()'>Skip</button></div>`;
  document.getElementById('gameArea').innerHTML = html;
}

function showHint() {
  const h = puzzles[current].hints;
  const hint = h[Math.floor(Math.random()*h.length)];
  document.getElementById('feedback').innerHTML = "<span class='hint'>Hint: "+hint+"</span>";
}

function skipPuzzle() {
  document.getElementById('feedback').innerHTML = "Skipped! Moving to next lock.";
  current++;
  setTimeout(renderPuzzle, 1000);
}

function correctAction() {
  document.getElementById('feedback').innerHTML = "<span style='color:lightgreen'>Correct! "+puzzles[current].explanation+" (Door opened.)</span>";
  score++;
  document.getElementById('score').textContent = score;
  current++;
  setTimeout(renderPuzzle, 1500);
}

function incorrectAction() {
  document.getElementById('feedback').innerHTML = "<span style='color:#ff8080'>Incorrect! Try again or request a hint.</span>";
}

function checkMCQ(index) {
  const p = puzzles[current];
  if(index === p.answer) correctAction(); else incorrectAction();
}

function checkSHORT() {
  const val = document.getElementById('shortAns').value.trim().toLowerCase();
  const p = puzzles[current];
  if(val.includes(p.answer)) correctAction(); else incorrectAction();
}

function checkMATCH() {
  const p=puzzles[current];
  const inputs=document.querySelectorAll('.matchAns');
  let correct=0;
  inputs.forEach(inp=>{
    const key=inp.dataset.key;
    if(p.pairs[key].toLowerCase().includes(inp.value.trim().toLowerCase())) correct++;
  });
  if(correct===Object.keys(p.pairs).length) correctAction(); 
  else incorrectAction();
}

document.getElementById('downloadBtn').addEventListener('click', ()=>{
  const blob = new Blob([document.documentElement.outerHTML], {type: 'text/html'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  const g = window.__gameGrade || "grade";
  const t = window.__gameTopics || "topic";
  a.download = `EscapeRoom_${g}_${t}.html`;
  a.click();
});

renderPuzzle();
</script>
</body>
</html>
```